<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Hobivia — Explorer</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500&family=Space+Grotesk:wght@600;700&display=swap" rel="stylesheet">

<style>
:root{
  --vert:#1B4F46; --beige:#EDE6DA; --cta:#D07B4E; --noir:#1c1f1e; --blanc:#fff;
  --glass:rgba(255,255,255,.14); --brd:rgba(255,255,255,.35); --shadow:0 10px 30px rgba(0,0,0,.18);
}
*{box-sizing:border-box} html,body{margin:0}
body{font-family:Inter,sans-serif;background:var(--beige);color:var(--noir);cursor:none}
.container{max-width:1180px;margin:0 auto;padding:0 20px}
h1,h2,h3{font-family:"Space Grotesk",sans-serif;color:var(--vert);margin:0}
.glass{background:var(--glass);border:1px solid var(--brd);backdrop-filter:blur(14px);border-radius:22px;box-shadow:var(--shadow)}
.btn{display:inline-flex;align-items:center;gap:.55rem;background:var(--cta);color:#fff;padding:.65rem 1.1rem;border-radius:999px;font-weight:700;text-decoration:none;transition:.3s;box-shadow:0 4px 14px rgba(0,0,0,.15)}
.btn:hover{transform:translateY(-2px) scale(1.02);background:#b8673f}

/* Accroche fade */
.lead{margin:18px 0 12px;padding:14px 18px;text-align:center}
.fade-on-scroll{transition:opacity .4s ease, transform .4s ease}

/* Curseur glass global (au-dessus de tout) */
.cursor{position:fixed;inset:0;pointer-events:none;z-index:9999}
.cursor-dot{position:absolute;width:18px;height:18px;border-radius:50%;background:rgba(255,255,255,.25);border:1px solid var(--brd);backdrop-filter:blur(8px);transform:translate(-50%,-50%);box-shadow:0 6px 18px rgba(0,0,0,.12)}
@media(hover:none){body{cursor:auto}.cursor{display:none}}

/* Grille liste (placeholder) */
.section{padding:22px 0 46px}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
@media(max-width:980px){.grid{grid-template-columns:1fr}}
.card{padding:14px}
</style>
</head>
<body>

<!-- Curseur -->
<div class="cursor"><div class="cursor-dot" id="cursor"></div></div>

<!-- ▼ header via partial -->
<div data-include="partials/header.html"></div>

<main class="container">
  <!-- Accroche (introduit la carte) -->
  <div id="lead" class="lead glass fade-on-scroll">
    Chaque point sur la carte est une expérience unique à vivre. Lequel sera le tien ?
  </div>

  <!-- Carte injectée depuis map.html (réutilisation réelle) -->
  <section class="glass" style="padding:8px;margin-bottom:22px">
    <iframe src="map.html" title="Carte Hobivia" style="width:100%;height:600px;border:0;border-radius:18px;overflow:hidden;"></iframe>
  </section>

  <!-- Liste synchronisée (à implémenter si tu veux aussi la sortir en partial plus tard) -->
  <section class="section">
    <h2>Todos les logements</h2>
    <div id="list" class="grid">
      <!-- Placeholder visuel (tu peux retirer) -->
      <article class="card glass">La liste se charge via la page Explorer autonome — on peut la factoriser en partial si tu veux.</article>
      <article class="card glass">Option : déplacer la logique de liste dans un fichier `partials/list.html` + `list.js`.</article>
    </div>
  </section>
</main>

<!-- ▼ footer via partial -->
<div data-include="partials/footer.html"></div>

<script type="module">
/* Inclure les partials header/footer */
async function includePartials(){
  const slots=[...document.querySelectorAll('[data-include]')];
  await Promise.all(slots.map(async s=>{
    const url=s.getAttribute('data-include');
    try{
      const res=await fetch(url,{cache:"no-store"});
      if(!res.ok) return;
      s.innerHTML=await res.text();
    }catch(e){ console.warn("Partial introuvable:",url); }
  }));
}
includePartials();

/* Curseur glass */
const dot=document.querySelector('.cursor-dot');
window.addEventListener('mousemove',e=>{
  dot.style.top=e.clientY+'px'; dot.style.left=e.clientX+'px';
});

/* Fade de l’accroche au scroll */
const lead=document.getElementById('lead');
window.addEventListener('scroll', ()=>{
  const y=window.scrollY; const ratio=Math.min(1,y/180);
  lead.style.opacity=String(1-ratio);
  lead.style.transform=`translateY(${ratio*12}px)`;
});
</script>
</body>
</html>
